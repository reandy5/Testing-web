<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N6HN27QS');</script>
<!-- End Google Tag Manager -->
  <meta charset="UTF-8" />
  <title>Product List</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6HN27QS"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<h1>Promo</h1>
  
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <a href="promo.html" onclick="selectPromotion()">
    <div class="carousel-item active">
      <img class="d-block w-100" src="https://png.pngtree.com/png-vector/20230605/ourmid/pngtree-special-promo-banner-design-for-sale-and-offer-vector-png-image_7121132.png" alt="First slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="https://png.pngtree.com/png-vector/20230605/ourmid/pngtree-special-promo-banner-design-for-sale-and-offer-vector-png-image_7121132.png" alt="Second slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="https://png.pngtree.com/png-vector/20230605/ourmid/pngtree-special-promo-banner-design-for-sale-and-offer-vector-png-image_7121132.png" alt="Third slide">
    </div>
    </a>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

  <h1>Daftar Handphone</h1>
  <ul>
    <li>
      <a href="hp-abc.html" onclick="selectItem1()">Handphone ABC - Rp 2.500.000 *Promotion*</a>
      <button onclick="addToCartABC()">Add to Cart</button>
    </li>
    <li>
      <a href="hp-xyz.html" onclick="selectItem2()">Handphone XYZ - Rp 2.000.000</a>
      <button onclick="addToCartXYZ()">Add to Cart</button>
    </li>
  </ul>

  <script>

    // Fungsi: add to cart untuk HP ABC
    function addToCartABC() {
      const item = {
        item_id: "hp_abc",
        item_name: "Handphone ABC",
        item_brand: "Samsung",
        item_category: "Handphone",
        item_variant: "ABC",
        price: 2500000,
        quantity: 1
      };
      addItemToCart(item);
    }

    // Fungsi: add to cart untuk HP XYZ
    function addToCartXYZ() {
      const item = {
        item_id: "hp_xyz",
        item_name: "Handphone XYZ",
        item_brand: "Xiaomi",
        item_category: "Handphone",
        item_variant: "XYZ",
        price: 2000000,
        quantity: 1
      };
      addItemToCart(item);
    }

    // Fungsi umum untuk add item
    function addItemToCart(item) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  // Cari apakah item dengan item_id yang sama sudah ada
  const existingItemIndex = cart.findIndex(cartItem => cartItem.item_id === item.item_id);

  if (existingItemIndex !== -1) {
    // Item sudah ada, tambahkan quantity-nya
    cart[existingItemIndex].quantity += item.quantity;
  } else {
    // Item belum ada, tambahkan ke cart
    cart.push(item);
  }

  // Simpan kembali ke localStorage
  localStorage.setItem("cart", JSON.stringify(cart));

  // Push ke dataLayer
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    event: "add_to_cart",
    ecommerce: {
      currency: "IDR",
      value: item.price,
      items: [item]
    }
  });

  alert(item.item_name + " ditambahkan ke keranjang!");
}


    // Event view_item_list
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      event: "view_item_list",
      ecommerce: {
        currency: "IDR",
        item_list_id: "hp_list_1",
        item_list_name: "Handphone List",
        items: [
          {
            item_id: "hp_abc",
            item_name: "Handphone ABC",
            item_brand: "Samsung",
            item_category: "Handphone",
            item_variant: "ABC",
            price: 2500000,
            quantity: 1
            
          },
          {
            item_id: "hp_xyz",
            item_name: "Handphone XYZ",
            item_brand: "Xiaomi",
            item_category: "Handphone",
            item_variant: "XYZ",
            price: 2000000,
            quantity: 1
          }
        ]
      }
    });

    // Event view_promotion
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      event: "view_promotion",
      ecommerce: {
    creative_name: "https://reandy5.github.io/Testing-web/hp-abc.html",
    creative_slot: 1,
    promotion_id: "promo_hpabc",
    promotion_name: "Diskon 5.5"
        // ,
    // items: [
    // {
    //   item_id: "hp_abc",
    //   item_name: "Handphone ABC",
    //   item_category: "Handphone",
    //   item_list_id: "hp_list_1",
    //   item_list_name: "Handphone List",
    //   item_variant: "ABC",
    //   location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
    //   price: 2000000,
    //   quantity: 1
    // }
    // ]
  }
    });

    // Fungsi: promo diklik
    function selectPromotion() {
      // Reset terlebih dahulu
      // window.dataLayer.push({ ecommerce: null });  
      window.dataLayer = window.dataLayer || [];
window.dataLayer.push({
  event: "select_promotion",
  ecommerce: {
    creative_name: "https://reandy5.github.io/Testing-web/promo.html",
    creative_slot: "1",
    promotion_id: "promo_hpabc",
    promotion_name: "Diskon HP ABC"
    // ,
    // items: [{
    //   item_id: "hp_abc",
    //   item_name: "Handphone ABC",
    //   item_brand: "Samsung",
    //   item_category: "Handphone",
    //   item_variant: "ABC",
    //   price: 2500000,
    //   quantity: "1"
    // }]
  }
});
    }

    // Fungsi: select item diklik
    function selectItem1() {
      // Reset object
      window.dataLayer.push({ ecommerce: null });  
window.dataLayer.push({
  event: "select_item",
  ecommerce: {
    currency: "IDR",
    items: [{
      item_id: "hp_abc",
      item_name: "Handphone ABC",
      item_brand: "Samsung",
      item_category: "Handphone",
      item_variant: "ABC",
      price: 2500000,
      quantity: 1
    }]
  }
});
    }

    // Fungsi: promo diklik
    function selectItem2() {
      // Reset object
      window.dataLayer.push({ ecommerce: null });  
window.dataLayer.push({
  event: "select_item",
  ecommerce: {
    currency: "IDR",
    item_list_id: "hp_list_1",
        item_list_name: "Handphone List",
    items: [{
      item_id: "hp_xyz",
            item_name: "Handphone XYZ",
            item_brand: "Xiaomi",
            item_category: "Handphone",
            item_variant: "XYZ",
            price: 2000000,
            quantity: 1
    }]
  }
});
    }
  </script>
</body>
</html>
