<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Detail HP ABC</title>
</head>
<body>
  <h1>Handphone ABC</h1>
  <p>Harga: Rp 2.500.000</p>
  <button onclick="addToCart()">Add to Cart</button>
  <button onclick="removeFromCart()">Remove from Cart</button>
  <a href="checkout.html">Checkout</a>

  <script>
    const item = {
      item_id: "hp_abc",
      item_name: "Handphone ABC",
      item_category: "Handphone",
      price: 2500000,
      quantity: 1
    };

    function addToCart() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.push(item);
      localStorage.setItem("cart", JSON.stringify(cart));

      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event: "add_to_cart",
        ecommerce: {
          currency: "IDR",
          value: item.price,
          items: [item]
        }
      });
      alert("Ditambahkan ke keranjang!");
    }

    function removeFromCart() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart = cart.filter(i => i.item_id !== item.item_id);
      localStorage.setItem("cart", JSON.stringify(cart));

      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event: "remove_from_cart",
        ecommerce: {
          currency: "IDR",
          value: item.price,
          items: [item]
        }
      });
      alert("Dihapus dari keranjang!");
    }

    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      event: "view_item",
      ecommerce: {
        currency: "IDR",
        value: item.price,
        items: [item]
      }
    });
  </script>
</body>
</html>
